import redis
import requests
import json
pool = redis.ConnectionPool(host='redis', port=6379, db=0)
rd = redis.Redis(connection_pool=pool)

# try:
#     resp = requests.get('http://www.apilayer.net/api/live?access_key=9a29405877af2d37a0c949d8aa0583fc&format=1&source=USD')
# except e:
#     print ('Error: %s'%e)

myjs = json.loads('''{
  "success":true,
  "terms":"https:\/\/currencylayer.com\/terms",
  "privacy":"https:\/\/currencylayer.com\/privacy",
  "timestamp":1520110271,
  "source":"USD",
  "quotes":{
    "USDAED":3.672804,
    "USDAFN":68.699997,
    "USDALL":107.099998,
    "USDAMD":480.299988,
    "USDANG":1.780403,
    "USDAOA":214.854996,
    "USDARS":20.249001,
    "USDAUD":1.287704,
    "USDAWG":1.78,
    "USDAZN":1.699604,
    "USDBAM":1.589704,
    "USDBBD":2,
    "USDBDT":82.889999,
    "USDBGN":1.588604,
    "USDBHD":0.376504,
    "USDBIF":1750.97998,
    "USDBMD":1,
    "USDBND":1.316904,
    "USDBOB":6.850399,
    "USDBRL":3.251704,
    "USDBSD":1,
    "USDBTC":8.9e-5,
    "USDBTN":65.224998,
    "USDBWP":9.582704,
    "USDBYN":1.950398,
    "USDBYR":19600,
    "USDBZD":1.997804,
    "USDCAD":1.287804,
    "USDCDF":1565.50392,
    "USDCHF":0.937604,
    "USDCLF":0.02198,
    "USDCLP":598.570007,
    "USDCNY":6.342704,
    "USDCOP":2865,
    "USDCRC":566.299988,
    "USDCUC":1,
    "USDCUP":26.5,
    "USDCVE":89.519997,
    "USDCZK":20.58304,
    "USDDJF":176.800003,
    "USDDKK":6.043804,
    "USDDOP":48.980393,
    "USDDZD":113.897003,
    "USDEGP":17.590393,
    "USDERN":14.990392,
    "USDETB":27.200001,
    "USDEUR":0.811704,
    "USDFJD":2.01704,
    "USDFKP":0.724604,
    "USDGBP":0.72446,
    "USDGEL":2.454904,
    "USDGGP":0.724586,
    "USDGHS":4.453504,
    "USDGIP":0.724904,
    "USDGMD":46.799999,
    "USDGNF":8900.000355,
    "USDGTQ":7.33604,
    "USDGYD":205.089996,
    "USDHKD":7.829204,
    "USDHNL":23.493999,
    "USDHRK":6.036204,
    "USDHTG":63.770388,
    "USDHUF":254.429993,
    "USDIDR":13753,
    "USDILS":3.437404,
    "USDIMP":0.724586,
    "USDINR":65.20904,
    "USDIQD":1184,
    "USDIRR":37330.000352,
    "USDISK":100.300003,
    "USDJEP":0.724586,
    "USDJMD":126.269997,
    "USDJOD":0.707504,
    "USDJPY":105.716003,
    "USDKES":101.150002,
    "USDKGS":68.025002,
    "USDKHR":3986.000351,
    "USDKMF":399.250384,
    "USDKPW":900.00035,
    "USDKRW":1078.189941,
    "USDKWD":0.299904,
    "USDKYD":0.820383,
    "USDKZT":322.250383,
    "USDLAK":8291.000349,
    "USDLBP":1510.000349,
    "USDLKR":154.949997,
    "USDLRD":130.300003,
    "USDLSL":11.903772,
    "USDLTL":0.356039,
    "USDLVL":0.62055,
    "USDLYD":1.334504,
    "USDMAD":9.196039,
    "USDMDL":16.629999,
    "USDMGA":3090.000347,
    "USDMKD":49.709999,
    "USDMMK":1337.000346,
    "USDMNT":2387.000346,
    "USDMOP":8.057304,
    "USDMRO":350.000346,
    "USDMUR":32.900002,
    "USDMVR":15.350378,
    "USDMWK":713.47998,
    "USDMXN":18.792999,
    "USDMYR":3.901039,
    "USDMZN":61.000344,
    "USDNAD":11.911039,
    "USDNGN":359.000344,
    "USDNIO":30.910377,
    "USDNOK":7.776804,
    "USDNPR":104.351997,
    "USDNZD":1.381504,
    "USDOMR":0.384804,
    "USDPAB":1,
    "USDPEN":3.253504,
    "USDPGK":3.145039,
    "USDPHP":51.950001,
    "USDPKR":110.419998,
    "USDPLN":3.399104,
    "USDPYG":5520.000341,
    "USDQAR":3.639804,
    "USDRON":3.775104,
    "USDRSD":95.864403,
    "USDRUB":56.804001,
    "USDRWF":841.820007,
    "USDSAR":3.749804,
    "USDSBD":7.713504,
    "USDSCR":13.60368,
    "USDSDG":17.910372,
    "USDSEK":8.245904,
    "USDSGD":1.318504,
    "USDSHP":0.724904,
    "USDSLL":7630.000339,
    "USDSOS":562.000338,
    "USDSRD":7.420371,
    "USDSTD":19891.199219,
    "USDSVC":8.75037,
    "USDSYP":514.97998,
    "USDSZL":11.903655,
    "USDTHB":31.42037,
    "USDTJS":8.816904,
    "USDTMT":3.4,
    "USDTND":2.408504,
    "USDTOP":2.231104,
    "USDTRY":3.802504,
    "USDTTD":6.629504,
    "USDTWD":29.275999,
    "USDTZS":2253.000336,
    "USDUAH":26.590367,
    "USDUGX":3635.000335,
    "USDUSD":1,
    "USDUYU":28.360001,
    "USDUZS":8150.000335,
    "USDVEF":35190.000334,
    "USDVND":22759,
    "USDVUV":104.699997,
    "USDWST":2.562904,
    "USDXAF":531.950012,
    "USDXAG":0.060546,
    "USDXAU":0.000756,
    "USDXCD":2.703606,
    "USDXDR":0.689644,
    "USDXOF":531.950012,
    "USDXPF":97.150364,
    "USDYER":249.750364,
    "USDZAR":11.889804,
    "USDZMK":9001.203593,
    "USDZMW":9.703591,
    "USDZWL":322.355011
  }
}''')

# # print myjs["quotes"]
# for quote in myjs["quotes"]:
#     # print('%s:%s'%(quote,myjs["quotes"][quote]))
#     rd.setex(quote, myjs["quotes"][quote],14800)
rate = rd.get('USDBTC')
if (rate is not None):
  print('ok')
else:
  print(float(2)*12000)